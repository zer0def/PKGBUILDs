diff -rupN qt-everywhere-src-5.12.5-orig/qtbase/config_help.txt qt-everywhere-src-5.12.5/qtbase/config_help.txt
--- qt-everywhere-src-5.12.5-orig/qtbase/config_help.txt	2021-11-01 16:09:18.459600708 +0100
+++ qt-everywhere-src-5.12.5/qtbase/config_help.txt	2021-11-01 16:11:38.708182498 +0100
@@ -200,7 +200,6 @@ Build environment:
                          [$ANDROID_NDK_HOST]
   -android-arch ........ Set Android architecture (armeabi, armeabi-v7a,
                          arm64-v8a, x86, x86_64, mips, mips64)
-  -android-toolchain-version ... Set Android toolchain version
   -android-style-assets  Automatically extract style assets from the device at
                          run time. This option makes the Android style behave
                          correctly, but also makes the Android platform plugin
diff -rupN qt-everywhere-src-5.12.5-orig/qtbase/configure qt-everywhere-src-5.12.5/qtbase/configure
--- qt-everywhere-src-5.12.5-orig/qtbase/configure	2021-11-01 16:09:18.366268326 +0100
+++ qt-everywhere-src-5.12.5/qtbase/configure	2021-11-01 16:11:10.135137367 +0100
@@ -446,8 +446,7 @@ while [ "$#" -gt 0 ]; do
     -android-ndk| \
     -android-ndk-platform| \
     -android-ndk-host| \
-    -android-arch| \
-    -android-toolchain-version)
+    -android-arch)
         VAR=`echo $1 | sed 's,^-\(.*\),\1,'`
         shift
         VAL="$1"
diff -rupN qt-everywhere-src-5.12.5-orig/qtbase/configure.json qt-everywhere-src-5.12.5/qtbase/configure.json
--- qt-everywhere-src-5.12.5-orig/qtbase/configure.json	2021-11-01 16:09:18.366268326 +0100
+++ qt-everywhere-src-5.12.5/qtbase/configure.json	2021-11-01 16:11:24.988320901 +0100
@@ -55,7 +55,6 @@
             "android-ndk-host": "string",
             "android-ndk-platform": "string",
             "android-sdk": "string",
-            "android-toolchain-version": "string",
 
             "android-style-assets": "boolean",
             "appstore-compliant": "boolean",
diff -rupN qt-everywhere-src-5.12.5-orig/qtbase/configure.pri qt-everywhere-src-5.12.5/qtbase/configure.pri
--- qt-everywhere-src-5.12.5-orig/qtbase/configure.pri	2021-11-01 16:09:18.412934517 +0100
+++ qt-everywhere-src-5.12.5/qtbase/configure.pri	2021-11-01 16:12:51.234117302 +0100
@@ -552,14 +552,7 @@ defineTest(qtConfOutput_prepareOptions)
             qtConfFatalError("Cannot find Android NDK." \
                              "Please use -android-ndk option to specify one.")
 
-        ndk_tc_ver = $$eval(config.input.android-toolchain-version)
-        isEmpty(ndk_tc_ver): \
-            ndk_tc_ver = 4.9
-        !exists($$ndk_root/toolchains/arm-linux-androideabi-$$ndk_tc_ver/prebuilt/*): \
-            qtConfFatalError("Cannot detect Android NDK toolchain." \
-                             "Please use -android-toolchain-version to specify it.")
-
-        ndk_tc_pfx = $$ndk_root/toolchains/arm-linux-androideabi-$$ndk_tc_ver/prebuilt
+        ndk_tc_pfx = $$ndk_root/toolchains/llvm/prebuilt
         ndk_host = $$eval(config.input.android-ndk-host)
         isEmpty(ndk_host): \
             ndk_host = $$getenv(ANDROID_NDK_HOST)
diff -rupN qt-everywhere-src-5.12.5-orig/qtbase/mkspecs/android-clang/qmake.conf qt-everywhere-src-5.12.5/qtbase/mkspecs/android-clang/qmake.conf
--- qt-everywhere-src-5.12.5-orig/qtbase/mkspecs/android-clang/qmake.conf	2021-11-01 16:55:07.141056664 +0100
+++ qt-everywhere-src-5.12.5/qtbase/mkspecs/android-clang/qmake.conf	2021-11-01 16:59:11.814997190 +0100
@@ -15,30 +15,26 @@ QMAKE_CC      = $$NDK_LLVM_PATH/bin/clan
 QMAKE_CXX     = $$NDK_LLVM_PATH/bin/clang++
 
 equals(ANDROID_TARGET_ARCH, armeabi-v7a): \
-    QMAKE_CFLAGS += -target armv7-none-linux-androideabi
+    QMAKE_CFLAGS += -target armv7a-linux-androideabi$$replace(ANDROID_PLATFORM, "android-", "")
 else: equals(ANDROID_TARGET_ARCH, armeabi): \
-    QMAKE_CFLAGS += -target armv5te-none-linux-androideabi
+    QMAKE_CFLAGS += -target armv5te-linux-androideabi$$replace(ANDROID_PLATFORM, "android-", "")
 else: equals(ANDROID_TARGET_ARCH, arm64-v8a): \
-    QMAKE_CFLAGS += -target aarch64-none-linux-android
+    QMAKE_CFLAGS += -target aarch64-linux-android$$replace(ANDROID_PLATFORM, "android-", "")
 else: equals(ANDROID_TARGET_ARCH, x86): \
-    QMAKE_CFLAGS += -target i686-none-linux-android -mstackrealign
+    QMAKE_CFLAGS += -target i686-linux-android$$replace(ANDROID_PLATFORM, "android-", "") -mstackrealign
 else: equals(ANDROID_TARGET_ARCH, x86_64): \
-    QMAKE_CFLAGS += -target x86_64-none-linux-android
+    QMAKE_CFLAGS += -target x86_64-linux-android$$replace(ANDROID_PLATFORM, "android-", "")
 else: equals(ANDROID_TARGET_ARCH, mips): \
-    QMAKE_CFLAGS += -target mipsel-none-linux-android
+    QMAKE_CFLAGS += -target mipsel-linux-android$$replace(ANDROID_PLATFORM, "android-", "")
 else: equals(ANDROID_TARGET_ARCH, mips64): \
-    QMAKE_CFLAGS += -target mips64el-none-linux-android
+    QMAKE_CFLAGS += -target mips64el-linux-android$$replace(ANDROID_PLATFORM, "android-", "")
 
 QMAKE_CFLAGS += -gcc-toolchain $$NDK_TOOLCHAIN_PATH -fno-limit-debug-info
 
 QMAKE_LINK    = $$QMAKE_CXX $$QMAKE_CFLAGS -Wl,--exclude-libs,libgcc.a -Wl,--exclude-libs,libatomic.a -nostdlib++
 equals(ANDROID_TARGET_ARCH, armeabi-v7a): QMAKE_LINK += -Wl,--exclude-libs,libunwind.a
 
-QMAKE_CFLAGS += -DANDROID_HAS_WSTRING --sysroot=$$NDK_ROOT/sysroot \
-                -isystem $$NDK_ROOT/sysroot/usr/include/$$NDK_TOOLS_PREFIX \
-                -isystem $$NDK_ROOT/sources/cxx-stl/llvm-libc++/include \
-                -isystem $$NDK_ROOT/sources/android/support/include \
-                -isystem $$NDK_ROOT/sources/cxx-stl/llvm-libc++abi/include
+QMAKE_CFLAGS += -DANDROID_HAS_WSTRING
 
 ANDROID_SOURCES_CXX_STL_LIBDIR = $$NDK_ROOT/sources/cxx-stl/llvm-libc++/libs/$$ANDROID_TARGET_ARCH
 
@@ -48,6 +44,8 @@ ANDROID_USE_LLVM = true

 exists($$ANDROID_SOURCES_CXX_STL_LIBDIR/libc++.so): \
     ANDROID_CXX_STL_LIBS = -lc++
+else: exists($$ANDROID_SOURCES_CXX_STL_LIBDIR/libc++_shared.so): \
+    ANDROID_CXX_STL_LIBS = -lc++_shared
 else: \
     ANDROID_CXX_STL_LIBS = $$ANDROID_SOURCES_CXX_STL_LIBDIR/libc++.so.$$replace(ANDROID_PLATFORM, "android-", "")
 
diff -rupN qt-everywhere-src-5.12.5-orig/qtbase/mkspecs/common/android-base-head.conf qt-everywhere-src-5.12.5/qtbase/mkspecs/common/android-base-head.conf
--- qt-everywhere-src-5.12.5-orig/qtbase/mkspecs/common/android-base-head.conf	2021-11-01 17:21:44.643279291 +0100
+++ qt-everywhere-src-5.12.5/qtbase/mkspecs/common/android-base-head.conf	2021-11-01 17:22:55.209080686 +0100
@@ -27,12 +27,7 @@ isEmpty(NDK_TOOLCHAIN_PREFIX) {
 
 NDK_TOOLS_PREFIX = $$(ANDROID_NDK_TOOLS_PREFIX)
 isEmpty(NDK_TOOLS_PREFIX) {
-    equals(ANDROID_TARGET_ARCH, x86): NDK_TOOLS_PREFIX = i686-linux-android
-    else: equals(ANDROID_TARGET_ARCH, x86_64): NDK_TOOLS_PREFIX = x86_64-linux-android
-    else: equals(ANDROID_TARGET_ARCH, mips): NDK_TOOLS_PREFIX = mipsel-linux-android
-    else: equals(ANDROID_TARGET_ARCH, mips64): NDK_TOOLS_PREFIX = mips64el-linux-android
-    else: equals(ANDROID_TARGET_ARCH, arm64-v8a): NDK_TOOLS_PREFIX = aarch64-linux-android
-    else: NDK_TOOLS_PREFIX = arm-linux-androideabi
+    NDK_TOOLS_PREFIX = llvm
 }
 
 NDK_TOOLCHAIN_VERSION = $$(ANDROID_NDK_TOOLCHAIN_VERSION)
@@ -47,8 +47,7 @@ else: ANDROID_ARCHITECTURE = arm
 
 !equals(NDK_TOOLCHAIN_VERSION, 4.4.3): ANDROID_CXXSTL_SUFFIX = -$$NDK_TOOLCHAIN_VERSION
 
-NDK_TOOLCHAIN = $$NDK_TOOLCHAIN_PREFIX-$$NDK_TOOLCHAIN_VERSION
-NDK_TOOLCHAIN_PATH = $$NDK_ROOT/toolchains/$$NDK_TOOLCHAIN/prebuilt/$$NDK_HOST
+NDK_TOOLCHAIN_PATH = $$NDK_ROOT/toolchains/llvm/prebuilt/$$NDK_HOST
 
 
 ANDROID_SDK_ROOT = $$(ANDROID_SDK_ROOT)
@@ -66,7 +65,7 @@ isEmpty(ANDROID_SDK_BUILD_TOOLS_REVISION
 CONFIG += $$ANDROID_PLATFORM
 QMAKE_CFLAGS = -D__ANDROID_API__=$$replace(ANDROID_PLATFORM, "android-", "")
 
-ANDROID_PLATFORM_ROOT_PATH  = $$NDK_ROOT/platforms/$$ANDROID_PLATFORM/arch-$$ANDROID_ARCHITECTURE/
+ANDROID_PLATFORM_ROOT_PATH  = $$NDK_TOOLCHAIN_PATH/sysroot/
 
 CROSS_COMPILE = $$NDK_TOOLCHAIN_PATH/bin/$$NDK_TOOLS_PREFIX-
 
diff -rupN qt-everywhere-src-5.12.5-orig/qtbase/mkspecs/common/android-base-tail.conf qt-everywhere-src-5.12.5/qtbase/mkspecs/common/android-base-tail.conf
--- qt-everywhere-src-5.12.5-orig/qtbase/mkspecs/common/android-base-tail.conf	2021-11-01 17:54:51.179376931 +0100
+++ qt-everywhere-src-5.12.5/qtbase/mkspecs/common/android-base-tail.conf	2021-11-01 18:06:15.598833092 +0100
@@ -68,7 +68,7 @@ QMAKE_INCDIR_OPENGL     =
 QMAKE_LIBDIR_OPENGL     =
 
 QMAKE_LINK_SHLIB        = $$QMAKE_LINK
-QMAKE_LFLAGS            = --sysroot=$$ANDROID_PLATFORM_ROOT_PATH
+QMAKE_LFLAGS            =
 equals(ANDROID_TARGET_ARCH, x86_64) QMAKE_LFLAGS += -L$$ANDROID_PLATFORM_ROOT_PATH/usr/lib64
 QMAKE_LFLAGS_APP        = -Wl,--no-undefined -Wl,-z,noexecstack -shared
 QMAKE_LFLAGS_SHLIB      = -Wl,--no-undefined -Wl,-z,noexecstack -shared
diff -rupN qt-everywhere-src-5.12.5-orig/qtbase/tests/auto/android/runtests_androiddeployqt.pl qt-everywhere-src-5.12.5/qtbase/tests/auto/android/runtests_androiddeployqt.pl
--- qt-everywhere-src-5.12.5-orig/qtbase/tests/auto/android/runtests_androiddeployqt.pl	2021-11-01 16:25:16.673243273 +0100
+++ qt-everywhere-src-5.12.5/qtbase/tests/auto/android/runtests_androiddeployqt.pl	2021-11-01 16:25:29.733110887 +0100
@@ -52,7 +52,6 @@ my $help = 0;
 my $make_clean = 0;
 my $stop_on_fail = 0;
 my $time_out=400;
-my $android_toolchain_version = "4.8";
 my $host_arch = "linux-x86";
 my $android_sdk_dir = "$ENV{'ANDROID_SDK_ROOT'}";
 my $android_ndk_dir = "$ENV{'ANDROID_NDK_ROOT'}";
@@ -81,7 +80,6 @@ GetOptions('h|help' => \$help
             , 'runtime=i' => \$max_runtime
             , 'sdk=s' => \$android_sdk_dir
             , 'ndk=s' => \$android_ndk_dir
-            , 'toolchain=s' => \$android_toolchain_version
             , 'host=s' => \$host_arch
             , 'ant=s' => \$ant_tool
             , 'strip=s' => \$strip_tool
@@ -119,8 +117,8 @@ $deployqt_device_serial = "--device $dev
 $device_serial = "-s $device_serial" if ($device_serial);
 $testsubset="/$testsubset" if ($testsubset);
 
-$strip_tool="$android_ndk_dir/toolchains/arm-linux-androideabi-$android_toolchain_version/prebuilt/$host_arch/bin/arm-linux-androideabi-strip" unless($strip_tool);
-$readelf_tool="$android_ndk_dir/toolchains/arm-linux-androideabi-$android_toolchain_version/prebuilt/$host_arch/bin/arm-linux-androideabi-readelf"  unless($readelf_tool);
+$strip_tool="$android_ndk_dir/toolchains/llvm/prebuilt/$host_arch/bin/llvm-strip" unless($strip_tool);
+$readelf_tool="$android_ndk_dir/toolchains/llvm/prebuilt/$host_arch/bin/llvm-readelf"  unless($readelf_tool);
 $readelf_tool="$readelf_tool -d -w ";
 
 sub dir
diff -rupN qt-everywhere-src-5.12.5-orig/qtwebengine/src/3rdparty/chromium/build/config/android/config.gni qt-everywhere-src-5.12.5/qtwebengine/src/3rdparty/chromium/build/config/android/config.gni
--- qt-everywhere-src-5.12.5-orig/qtwebengine/src/3rdparty/chromium/build/config/android/config.gni	2021-11-01 16:25:19.409882199 +0100
+++ qt-everywhere-src-5.12.5/qtwebengine/src/3rdparty/chromium/build/config/android/config.gni	2021-11-01 16:41:11.793535909 +0100
@@ -277,31 +277,11 @@ if (is_android || is_chromeos) {
   # Path to the SDK's android.jar
   android_sdk_jar = "$android_sdk/android.jar"
 
-  # Subdirectories inside android_ndk_root that contain the sysroot for the
-  # associated platform.
-  x86_android_sysroot_subdir =
-      "platforms/android-${android32_ndk_api_level}/arch-x86"
-  arm_android_sysroot_subdir =
-      "platforms/android-${android32_ndk_api_level}/arch-arm"
-  mips_android_sysroot_subdir =
-      "platforms/android-${android32_ndk_api_level}/arch-mips"
-  x86_64_android_sysroot_subdir =
-      "platforms/android-${android64_ndk_api_level}/arch-x86_64"
-  arm64_android_sysroot_subdir =
-      "platforms/android-${android64_ndk_api_level}/arch-arm64"
-  mips64_android_sysroot_subdir =
-      "platforms/android-${android64_ndk_api_level}/arch-mips64"
-
   # Toolchain root directory for each build. The actual binaries are inside
   # a "bin" directory inside of these.
-  _android_toolchain_version = "4.9"
   _android_toolchain_detailed_version = "4.9.x"
-  x86_android_toolchain_root = "$android_ndk_root/toolchains/x86-${_android_toolchain_version}/prebuilt/${android_host_os}-${android_host_arch}"
-  arm_android_toolchain_root = "$android_ndk_root/toolchains/arm-linux-androideabi-${_android_toolchain_version}/prebuilt/${android_host_os}-${android_host_arch}"
-  mips_android_toolchain_root = "$android_ndk_root/toolchains/mipsel-linux-android-${_android_toolchain_version}/prebuilt/${android_host_os}-${android_host_arch}"
-  x86_64_android_toolchain_root = "$android_ndk_root/toolchains/x86_64-${_android_toolchain_version}/prebuilt/${android_host_os}-${android_host_arch}"
-  arm64_android_toolchain_root = "$android_ndk_root/toolchains/aarch64-linux-android-${_android_toolchain_version}/prebuilt/${android_host_os}-${android_host_arch}"
-  mips64_android_toolchain_root = "$android_ndk_root/toolchains/mips64el-linux-android-${_android_toolchain_version}/prebuilt/${android_host_os}-${android_host_arch}"
+  android_toolchain_root = "$android_ndk_root/toolchains/llvm/prebuilt/${android_host_os}-${android_host_arch}"
+  android_sysroot_subdir = "$android_toolchain_root/sysroot"
 
   # Location of libgcc. This is only needed for the current GN toolchain, so we
   # only need to define the current one, rather than one for every platform
@@ -309,33 +289,21 @@ if (is_android || is_chromeos) {
   if (current_cpu == "x86") {
     android_prebuilt_arch = "android-x86"
     _binary_prefix = "i686-linux-android"
-    android_toolchain_root = "$x86_android_toolchain_root"
-    android_libgcc_file = "$android_toolchain_root/lib/gcc/i686-linux-android/${_android_toolchain_detailed_version}/libgcc.a"
   } else if (current_cpu == "arm") {
     android_prebuilt_arch = "android-arm"
     _binary_prefix = "arm-linux-androideabi"
-    android_toolchain_root = "$arm_android_toolchain_root"
-    android_libgcc_file = "$android_toolchain_root/lib/gcc/arm-linux-androideabi/${_android_toolchain_detailed_version}/libgcc.a"
   } else if (current_cpu == "mipsel") {
     android_prebuilt_arch = "android-mips"
     _binary_prefix = "mipsel-linux-android"
-    android_toolchain_root = "$mips_android_toolchain_root"
-    android_libgcc_file = "$android_toolchain_root/lib/gcc/mipsel-linux-android/${_android_toolchain_detailed_version}/libgcc.a"
   } else if (current_cpu == "x64") {
     android_prebuilt_arch = "android-x86_64"
     _binary_prefix = "x86_64-linux-android"
-    android_toolchain_root = "$x86_64_android_toolchain_root"
-    android_libgcc_file = "$android_toolchain_root/lib/gcc/x86_64-linux-android/${_android_toolchain_detailed_version}/libgcc.a"
   } else if (current_cpu == "arm64") {
     android_prebuilt_arch = "android-arm64"
     _binary_prefix = "aarch64-linux-android"
-    android_toolchain_root = "$arm64_android_toolchain_root"
-    android_libgcc_file = "$android_toolchain_root/lib/gcc/aarch64-linux-android/${_android_toolchain_detailed_version}/libgcc.a"
   } else if (current_cpu == "mips64el") {
     android_prebuilt_arch = "android-mips64"
     _binary_prefix = "mips64el-linux-android"
-    android_toolchain_root = "$mips64_android_toolchain_root"
-    android_libgcc_file = "$android_toolchain_root/lib/gcc/mips64el-linux-android/${_android_toolchain_detailed_version}/libgcc.a"
   } else {
     assert(false, "Need android libgcc support for your target arch.")
   }
diff -rupN qt-everywhere-src-5.12.5-orig/qtwebengine/src/3rdparty/chromium/build/config/sysroot.gni qt-everywhere-src-5.12.5/qtwebengine/src/3rdparty/chromium/build/config/sysroot.gni
--- qt-everywhere-src-5.12.5-orig/qtwebengine/src/3rdparty/chromium/build/config/sysroot.gni	2021-11-01 16:25:19.409882199 +0100
+++ qt-everywhere-src-5.12.5/qtwebengine/src/3rdparty/chromium/build/config/sysroot.gni	2021-11-01 16:43:08.065684880 +0100
@@ -27,7 +27,7 @@ if (current_os == target_os && current_c
   import("//build/config/android/config.gni")
 
   # Android uses unified headers, and thus a single compile time sysroot
-  sysroot = "$android_ndk_root/sysroot"
+  sysroot = "$android_toolchain_root/sysroot"
 } else if (is_linux && use_sysroot) {
   # By default build against a sysroot image downloaded from Cloud Storage
   # during gclient runhooks.
@@ -82,22 +82,7 @@ if (current_os == target_os && current_c
 if (is_android) {
   # Android uses unified headers in NDK r16 and later, meaning that the
   # compile time sysroot and link time sysroot are different
-  link_sysroot = sysroot
-  if (current_cpu == "arm") {
-    link_sysroot = "$android_ndk_root/$arm_android_sysroot_subdir"
-  } else if (current_cpu == "arm64") {
-    link_sysroot = "$android_ndk_root/$arm64_android_sysroot_subdir"
-  } else if (current_cpu == "x86") {
-    link_sysroot = "$android_ndk_root/$x86_android_sysroot_subdir"
-  } else if (current_cpu == "x64") {
-    link_sysroot = "$android_ndk_root/$x86_64_android_sysroot_subdir"
-  } else if (current_cpu == "mipsel") {
-    link_sysroot = "$android_ndk_root/$mips_android_sysroot_subdir"
-  } else if (current_cpu == "mips64el") {
-    link_sysroot = "$android_ndk_root/$mips64_android_sysroot_subdir"
-  } else {
-    assert(false, "No android link sysroot for cpu: $target_cpu")
-  }
+  link_sysroot = "$android_toolchain_root/sysroot"
 } else {
   link_sysroot = sysroot
 }
diff -rupN qt-everywhere-src-5.12.5-orig/qtwebengine/src/3rdparty/chromium/build/toolchain/android/BUILD.gn qt-everywhere-src-5.12.5/qtwebengine/src/3rdparty/chromium/build/toolchain/android/BUILD.gn
--- qt-everywhere-src-5.12.5-orig/qtwebengine/src/3rdparty/chromium/build/toolchain/android/BUILD.gn	2021-11-01 16:25:19.416548799 +0100
+++ qt-everywhere-src-5.12.5/qtwebengine/src/3rdparty/chromium/build/toolchain/android/BUILD.gn	2021-11-01 16:43:58.348505869 +0100
@@ -67,8 +67,8 @@ template("android_clang_toolchain") {
 }
 
 android_clang_toolchain("android_clang_x86") {
-  toolchain_root = x86_android_toolchain_root
-  sysroot = "$android_ndk_root/$x86_android_sysroot_subdir"
+  toolchain_root = android_toolchain_root
+  sysroot = "$android_toolchain_root/sysroot"
   lib_dir = "usr/lib"
   binary_prefix = "i686-linux-android"
   toolchain_args = {
@@ -77,8 +78,8 @@ android_clang_toolchain("android_clang_x
 }
 
 android_clang_toolchain("android_clang_arm") {
-  toolchain_root = arm_android_toolchain_root
-  sysroot = "$android_ndk_root/$arm_android_sysroot_subdir"
+  toolchain_root = android_toolchain_root
+  sysroot = "$android_toolchain_root/sysroot"
   lib_dir = "usr/lib"
   binary_prefix = "arm-linux-androideabi"
   toolchain_args = {
@@ -87,8 +89,8 @@ android_clang_toolchain("android_clang_a
 }
 
 android_clang_toolchain("android_clang_mipsel") {
-  toolchain_root = mips_android_toolchain_root
-  sysroot = "$android_ndk_root/$mips_android_sysroot_subdir"
+  toolchain_root = android_toolchain_root
+  sysroot = "$android_toolchain_root/sysroot"
   lib_dir = "usr/lib"
   binary_prefix = "mipsel-linux-android"
   toolchain_args = {
@@ -97,8 +100,8 @@ android_clang_toolchain("android_clang_m
 }
 
 android_clang_toolchain("android_clang_x64") {
-  toolchain_root = x86_64_android_toolchain_root
-  sysroot = "$android_ndk_root/$x86_64_android_sysroot_subdir"
+  toolchain_root = android_toolchain_root
+  sysroot = "$android_toolchain_root/sysroot"
   lib_dir = "usr/lib64"
   binary_prefix = "x86_64-linux-android"
   toolchain_args = {
@@ -107,8 +111,8 @@ android_clang_toolchain("android_clang_x
 }
 
 android_clang_toolchain("android_clang_arm64") {
-  toolchain_root = arm64_android_toolchain_root
-  sysroot = "$android_ndk_root/$arm64_android_sysroot_subdir"
+  toolchain_root = android_toolchain_root
+  sysroot = "$android_toolchain_root/sysroot"
   lib_dir = "usr/lib"
   binary_prefix = "aarch64-linux-android"
   toolchain_args = {
@@ -117,8 +122,8 @@ android_clang_toolchain("android_clang_a
 }
 
 android_clang_toolchain("android_clang_mips64el") {
-  toolchain_root = mips64_android_toolchain_root
-  sysroot = "$android_ndk_root/$mips64_android_sysroot_subdir"
+  toolchain_root = android_toolchain_root
+  sysroot = "$android_toolchain_root/sysroot"
   lib_dir = "usr/lib64"
   binary_prefix = "mips64el-linux-android"
   toolchain_args = {
diff -rupN qt-everywhere-src-5.12.5-orig/qtwebengine/src/3rdparty/chromium/third_party/perfetto/gn/standalone/android.gni qt-everywhere-src-5.12.5/qtwebengine/src/3rdparty/chromium/third_party/perfetto/gn/standalone/android.gni
--- qt-everywhere-src-5.12.5-orig/qtwebengine/src/3rdparty/chromium/third_party/perfetto/gn/standalone/android.gni	2021-11-01 16:25:18.063229183 +0100
+++ qt-everywhere-src-5.12.5/qtwebengine/src/3rdparty/chromium/third_party/perfetto/gn/standalone/android.gni	2021-11-01 16:51:16.026975854 +0100
@@ -29,39 +29,28 @@ declare_args() {
 declare_args() {
   android_llvm_dir = "$android_ndk_root/toolchains/llvm/prebuilt/$android_host"
   android_clangrt_dir = "$android_llvm_dir/lib64/clang/5.0/lib/linux"
-  android_compile_sysroot = "$android_ndk_root/sysroot/usr/include"
+  android_compile_sysroot = "$android_llvm_dir/sysroot/usr/include"
+  android_toolchain_root = "$android_llvm_dir"
 
   if (current_cpu == "x86") {
     android_abi_target = "i686-linux-androideabi"
     android_compile_sysroot_subdir = "i686-linux-android"
-    android_link_sysroot_subdir =
-        "platforms/android-${android_api_level}/arch-x86"
     android_prebuilt_arch = "android-x86"
-    android_toolchain_root = "$android_ndk_root/toolchains/x86-${_android_toolchain_version}/prebuilt/$android_host"
     android_llvm_arch = "i686"
   } else if (current_cpu == "arm") {
     android_abi_target = "arm-linux-androideabi"
     android_compile_sysroot_subdir = "arm-linux-androideabi"
-    android_link_sysroot_subdir =
-        "platforms/android-${android_api_level}/arch-arm"
     android_prebuilt_arch = "android-arm"
-    android_toolchain_root = "$android_ndk_root/toolchains/arm-linux-androideabi-${_android_toolchain_version}/prebuilt/$android_host"
     android_llvm_arch = "arm"
   } else if (current_cpu == "x64") {
     android_abi_target = "x86_64-linux-android"
     android_compile_sysroot_subdir = "x86_64-linux-android"
-    android_link_sysroot_subdir =
-        "platforms/android-${android_api_level}/arch-x86_64"
     android_prebuilt_arch = "android-x86_64"
-    android_toolchain_root = "$android_ndk_root/toolchains/x86_64-${_android_toolchain_version}/prebuilt/$android_host"
     android_llvm_arch = "x86_64"
   } else if (current_cpu == "arm64") {
     android_abi_target = "aarch64-linux-android"
     android_compile_sysroot_subdir = "aarch64-linux-android"
-    android_link_sysroot_subdir =
-        "platforms/android-${android_api_level}/arch-arm64"
     android_prebuilt_arch = "android-arm64"
-    android_toolchain_root = "$android_ndk_root/toolchains/aarch64-linux-android-${_android_toolchain_version}/prebuilt/$android_host"
     android_llvm_arch = "aarch64"
   } else {
     assert(false, "Need android libgcc support for this arch.")
diff -rupN qt-everywhere-src-5.12.5-orig/qtwebengine/src/3rdparty/chromium/third_party/perfetto/gn/standalone/BUILD.gn qt-everywhere-src-5.12.5/qtwebengine/src/3rdparty/chromium/third_party/perfetto/gn/standalone/BUILD.gn
--- qt-everywhere-src-5.12.5-orig/qtwebengine/src/3rdparty/chromium/third_party/perfetto/gn/standalone/BUILD.gn	2021-11-01 16:25:18.063229183 +0100
+++ qt-everywhere-src-5.12.5/qtwebengine/src/3rdparty/chromium/third_party/perfetto/gn/standalone/BUILD.gn	2021-11-01 16:51:01.693803252 +0100
@@ -132,7 +132,7 @@ config("default") {
       "-Wl,-z,nocopyreloc",
       "-gcc-toolchain",
       "$android_toolchain_root",
-      "--sysroot=$android_ndk_root/$android_link_sysroot_subdir",
+      "--sysroot=$android_ndk_root/toolchains/llvm/prebuilt/$android_host/sysroot",
       "--target=$android_abi_target",
       "-Wl,--exclude-libs,libunwind.a",
       "-Wl,--exclude-libs,libgcc.a",
